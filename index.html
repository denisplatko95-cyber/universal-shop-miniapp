<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIVERSAL SHOP üõçÔ∏è</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        :root {
            --bg-color: #ffffff;
            --text-color: #1a1a1a;
            --card-bg: #f8f9fa;
            --accent: #6366f1;
            --border: #e5e7eb;
            --shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        
        .dark-theme {
            --bg-color: #0f172a;
            --text-color: #f1f5f9;
            --card-bg: #1e293b;
            --accent: #818cf8;
            --border: #334155;
            --shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        body {
            background: var(--bg-color);
            color: var(--text-color);
            transition: all 0.3s ease;
            padding-bottom: 70px;
        }
        
        /* –®–∞–ø–∫–∞ */
        .header {
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            background: var(--bg-color);
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 20px;
        }
        
        .logo-icon {
            color: var(--accent);
            font-size: 24px;
        }
        
        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .search-box {
            background: var(--card-bg);
            padding: 8px 15px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            width: 180px;
        }
        
        .search-input {
            background: transparent;
            border: none;
            color: var(--text-color);
            width: 100%;
            outline: none;
        }
        
        .theme-toggle {
            background: var(--card-bg);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: var(--text-color);
        }
        
        /* –ë–ª–æ–∫–∏ */
        .container {
            padding: 16px;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 24px 0 16px 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .section-icon {
            font-size: 22px;
        }
        
        /* –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª–∫–∏ —Å –∏–≥—Ä–∞–º–∏ */
        .shelf {
            display: flex;
            gap: 16px;
            overflow-x: auto;
            padding: 8px 0 20px 0;
            scrollbar-width: thin;
        }
        
        .shelf::-webkit-scrollbar {
            height: 4px;
        }
        
        .game-card {
            min-width: 100px;
            text-align: center;
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px 12px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 1px solid var(--border);
        }
        
        .game-card:hover {
            transform: translateY(-4px);
        }
        
        .game-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .game-name {
            font-size: 14px;
            font-weight: 500;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ "–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ" */
        .view-all {
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }
        
        /* –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ */
        .history-card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 16px;
            margin: 16px 0;
            border: 1px solid var(--border);
        }
        
        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .delete-history {
            background: #ef4444;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
        }
        
        /* –¢–æ–≤–∞—Ä—ã –≤ –ª–µ–Ω—Ç–µ */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        
        .product-card {
            background: var(--card-bg);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid var(--border);
            cursor: pointer;
        }
        
        .product-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
            background: linear-gradient(45deg, #6366f1, #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }
        
        .product-info {
            padding: 12px;
        }
        
        .product-name {
            font-weight: 600;
            margin-bottom: 6px;
            font-size: 14px;
        }
        
        .product-description {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 10px;
            line-height: 1.3;
        }
        
        .product-price {
            color: var(--accent);
            font-weight: 700;
            font-size: 16px;
        }
        
        .buy-btn {
            margin-top: 8px;
            width: 100%;
            padding: 8px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
        .action-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-color);
            padding: 12px 16px;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 12px;
            z-index: 100;
        }
        
        .action-btn {
            flex: 1;
            padding: 12px;
            border-radius: 12px;
            border: none;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: opacity 0.2s;
        }
        
        .primary-btn {
            background: var(--accent);
            color: white;
        }
        
        .secondary-btn {
            background: var(--card-bg);
            color: var(--text-color);
            border: 1px solid var(--border);
        }
        
        /* –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∏ */
        .admin-buttons {
            display: none;
            margin: 16px 0;
            gap: 10px;
            display: flex;
            flex-direction: column;
        }
        
        .add-btn {
            background: #10b981;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .admin-btn {
            background: #8b5cf6;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .search-box {
                width: 140px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            }
            
            .admin-buttons {
                flex-direction: column;
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* –ê–¥–º–∏–Ω-—Å—Ç–∞—Ç—É—Å */
        .admin-badge {
            background: #8b5cf6;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <!-- –®–∞–ø–∫–∞ -->
    <div class="header">
        <div class="logo">
            <div class="logo-icon">üõçÔ∏è</div>
            <span>UNIVERSAL SHOP</span>
            <div id="adminBadge" class="admin-badge" style="display: none;">üëë –ê–î–ú–ò–ù</div>
        </div>
        <div class="header-controls">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" class="search-input" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤...">
            </div>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
            </button>
        </div>
    </div>
    
    <!-- –ê–¥–º–∏–Ω –∫–Ω–æ–ø–∫–∏ -->
    <div class="container admin-buttons" id="adminButtons">
        <button class="admin-btn" onclick="showAddGameForm()">
            <i class="fas fa-plus-circle"></i> –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—É/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        </button>
        <button class="add-btn" onclick="showAddProductForm()">
            <i class="fas fa-cube"></i> –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
        </button>
        <button class="admin-btn" onclick="showOrders()" style="background: #f59e0b;">
            <i class="fas fa-shopping-cart"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
        </button>
    </div>
    
    <div class="container">
        <!-- –ë–ª–æ–∫ "–ò–≥—Ä—ã" -->
        <div class="section-title">
            <div class="section-icon">üéÆ</div>
            <span>–ò–≥—Ä—ã</span>
        </div>
        <div class="shelf" id="gamesShelf">
            <!-- –ò–≥—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>
        <button class="view-all" onclick="showAllGames()">
            <i class="fas fa-eye"></i> –°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ
        </button>
        
        <!-- –ë–ª–æ–∫ "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è" -->
        <div class="section-title">
            <div class="section-icon">üì±</div>
            <span>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram</span>
        </div>
        <div class="shelf" id="appsShelf">
            <!-- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>
        <button class="view-all" onclick="showAllApps()">
            <i class="fas fa-eye"></i> –°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ
        </button>
        
        <!-- –ë–ª–æ–∫ "–°–º–æ—Ç—Ä–µ–ª –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑" -->
        <div class="section-title">
            <div class="section-icon">üïí</div>
            <span>–°–º–æ—Ç—Ä–µ–ª –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑</span>
        </div>
        <div class="history-card" id="historyCard">
            <!-- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>
        
        <!-- –û–±—â–∞—è –ª–µ–Ω—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
        <div class="section-title">
            <div class="section-icon">üî•</div>
            <span>–í—Å–µ —Ç–æ–≤–∞—Ä—ã</span>
        </div>
        <div class="products-grid" id="productsGrid">
            <!-- –¢–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JS -->
        </div>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="action-buttons">
        <button class="action-btn secondary-btn" onclick="openSupport()">
            <i class="fas fa-comment"></i> –ü–æ–¥–¥–µ—Ä–∂–∫–∞
        </button>
        <button class="action-btn secondary-btn" onclick="openBonuses()">
            <i class="fas fa-gift"></i> –ë–æ–Ω—É—Å—ã
        </button>
        <button class="action-btn primary-btn" onclick="openProfile()">
            <i class="fas fa-user"></i> –ü—Ä–æ—Ñ–∏–ª—å
        </button>
    </div>

    <script>
        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        const tg = window.Telegram.WebApp;
        
        // –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.expand();
        tg.enableClosingConfirmation();
        
        // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
        const user = tg.initDataUnsafe.user;
        const userId = user?.id || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        const userName = user?.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        
        // –ü–†–û–í–ï–†–ö–ê –ù–ê –ê–î–ú–ò–ù–ê - –í–ê–® ID: 8381902355
        const ADMIN_IDS = [8381902355]; // –í–∞—à Telegram ID –∑–¥–µ—Å—å
        const isAdmin = ADMIN_IDS.includes(Number(userId));
        
        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram:', user);
        console.log('ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', userId);
        console.log('–≠—Ç–æ –∞–¥–º–∏–Ω?:', isAdmin);
        
        // ==================== –¢–ï–ú–ê ====================
        let isDarkTheme = tg.colorScheme === 'dark';
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º—É –∏–∑ Telegram
        if (isDarkTheme) {
            document.body.classList.add('dark-theme');
            document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
        }
        
        // ==================== –î–ê–ù–ù–´–ï ====================
        // –ò–≥—Ä—ã –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let games = [
            { id: 1, icon: 'üéÆ', name: 'Fortnite', type: 'game' },
            { id: 2, icon: '‚öîÔ∏è', name: 'Minecraft', type: 'game' },
            { id: 3, icon: 'üöó', name: 'GTA V', type: 'game' },
            { id: 4, icon: 'üî´', name: 'CS:GO', type: 'game' }
        ];
        
        let apps = [
            { id: 5, icon: 'üìà', name: '–ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ', type: 'app' },
            { id: 6, icon: 'üé®', name: '–î–∏–∑–∞–π–Ω', type: 'app' },
            { id: 7, icon: 'üéÅ', name: 'NFT-–ø–æ–¥–∞—Ä–∫–∏', type: 'app' }
        ];
        
        let products = [
            { 
                id: 101, 
                name: '–ê–∫–∫–∞—É–Ω—Ç Fortnite Pro', 
                desc: '–†–µ–¥–∫–∏–µ —Å–∫–∏–Ω—ã + 5000 V-bucks', 
                price: '$24.99', 
                icon: 'üë§',
                gameId: 1,
                data: '–õ–æ–≥–∏–Ω: fortnite_pro_123\n–ü–∞—Ä–æ–ª—å: QwErTy2024\n\n–í–∞–∂–Ω–æ: —Å–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞!'
            },
            { 
                id: 102, 
                name: '1000 –í-–±–∞–∫—Å–æ–≤', 
                desc: '–ò–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞ Fortnite', 
                price: '$9.99', 
                icon: 'üí∞',
                gameId: 1,
                data: '–ö–æ–¥: FN-7X9P-2K4L-8M3Q\n\n–ê–∫—Ç–∏–≤–∞—Ü–∏—è: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°—á–µ—Ç ‚Üí –í–≤–µ—Å—Ç–∏ –∫–æ–¥'
            },
            { 
                id: 103, 
                name: '–î–∏–∑–∞–π–Ω –∫–∞–Ω–∞–ª–∞ Telegram', 
                desc: '–£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω + –±–∞–Ω–Ω–µ—Ä', 
                price: '$49.99', 
                icon: 'üé®',
                gameId: 6,
                data: '–°—Å—ã–ª–∫–∞ –Ω–∞ Figma: https://figma.com/file/...\n\n–î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞: design@mail.com / pass123'
            }
        ];
        
        // –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
        let viewHistory = JSON.parse(localStorage.getItem('viewHistory') || '[]');
        
        // ==================== –ó–ê–ì–†–£–ó–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', function() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –µ—Å–ª–∏ –∞–¥–º–∏–Ω
            if (isAdmin) {
                document.getElementById('adminBadge').style.display = 'inline-block';
                document.getElementById('adminButtons').style.display = 'flex';
                tg.showAlert(`üëë –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ${userName}! –í–∞—à ID: ${userId}`);
            }
            
            // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
            setTimeout(() => {
                tg.showPopup({
                    title: `üëã –ü—Ä–∏–≤–µ—Ç, ${userName}!`,
                    message: isAdmin 
                        ? '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞–≥–∞–∑–∏–Ω–æ–º!'
                        : '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ UNIVERSAL SHOP!',
                    buttons: [{ type: 'default', text: '–ù–∞—á–∞—Ç—å –ø–æ–∫—É–ø–∫–∏', id: 'start' }]
                });
            }, 1000);
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            loadGames();
            loadApps();
            loadProducts();
            updateHistory();
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∫—É–ø–∫–∏
            tg.MainButton.setText("üõí –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ");
            tg.MainButton.onClick(buyProduct);
            tg.MainButton.hide();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        });
        
        // ==================== –¢–ï–ú–ê ====================
        function toggleTheme() {
            if (isDarkTheme) {
                document.body.classList.remove('dark-theme');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
                tg.setHeaderColor('#ffffff');
                isDarkTheme = false;
            } else {
                document.body.classList.add('dark-theme');
                document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
                tg.setHeaderColor('#0f172a');
                isDarkTheme = true;
            }
        }
        
        // ==================== –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• ====================
        function loadGames() {
            const shelf = document.getElementById('gamesShelf');
            shelf.innerHTML = '';
            
            games.forEach(game => {
                const card = document.createElement('div');
                card.className = 'game-card fade-in';
                card.innerHTML = `
                    <div class="game-icon">${game.icon}</div>
                    <div class="game-name">${game.name}</div>
                `;
                card.onclick = () => openCategory(game);
                shelf.appendChild(card);
            });
        }
        
        function loadApps() {
            const shelf = document.getElementById('appsShelf');
            shelf.innerHTML = '';
            
            apps.forEach(app => {
                const card = document.createElement('div');
                card.className = 'game-card fade-in';
                card.innerHTML = `
                    <div class="game-icon">${app.icon}</div>
                    <div class="game-name">${app.name}</div>
                `;
                card.onclick = () => openCategory(app);
                shelf.appendChild(card);
            });
        }
        
        function loadProducts() {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';
            
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card fade-in';
                card.innerHTML = `
                    <div class="product-image" style="background: linear-gradient(45deg, #6366f1, #8b5cf6);">
                        ${product.icon}
                    </div>
                    <div class="product-info">
                        <div class="product-name">${product.name}</div>
                        <div class="product-description">${product.desc}</div>
                        <div class="product-price">${product.price}</div>
                        <button class="buy-btn" onclick="selectProduct(${product.id})">
                            –ö—É–ø–∏—Ç—å
                        </button>
                    </div>
                `;
                grid.appendChild(card);
            });
        }
        
        function updateHistory() {
            const historyCard = document.getElementById('historyCard');
            if (viewHistory.length > 0) {
                const lastProduct = viewHistory[viewHistory.length - 1];
                historyCard.innerHTML = `
                    <div class="history-header">
                        <span>${lastProduct.name}</span>
                        <button class="delete-history" onclick="deleteHistory()">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                    <div>–¶–µ–Ω–∞: <strong>${lastProduct.price}</strong> ‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω: ${lastProduct.time}</div>
                `;
            } else {
                historyCard.innerHTML = `
                    <div class="history-header">
                        <span>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø—É—Å—Ç–∞</span>
                    </div>
                    <div>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä</div>
                `;
            }
        }
        
        // ==================== –û–¢–ö–†–´–¢–ò–ï –ö–ê–¢–ï–ì–û–†–ò–ô ====================
        function openCategory(category) {
            if (isAdmin) {
                // –î–ª—è –∞–¥–º–∏–Ω–∞ - –º–µ–Ω—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                tg.showPopup({
                    title: `üëë ${category.icon} ${category.name}`,
                    message: `–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π "${category.name}":\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:`,
                    buttons: [
                        { id: 'add_product', type: 'default', text: '‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä' },
                        { id: 'edit', type: 'default', text: '‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å' },
                        { id: 'view', type: 'default', text: 'üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã' },
                        { id: 'delete', type: 'destructive', text: 'üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é' },
                        { id: 'close', type: 'cancel', text: '–ó–∞–∫—Ä—ã—Ç—å' }
                    ]
                }).then(result => {
                    if (result === 'add_product') {
                        showAddProductToCategory(category);
                    } else if (result === 'edit') {
                        editCategory(category);
                    } else if (result === 'view') {
                        viewCategoryProducts(category);
                    } else if (result === 'delete') {
                        deleteCategory(category);
                    }
                });
            } else {
                // –î–ª—è –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                tg.showPopup({
                    title: `${category.icon} ${category.name}`,
                    message: `–¢–æ–≤–∞—Ä—ã –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category.name}"`,
                    buttons: [
                        { id: 'view', type: 'default', text: 'üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã' },
                        { id: 'close', type: 'cancel', text: '–ó–∞–∫—Ä—ã—Ç—å' }
                    ]
                });
            }
        }
        
        // ==================== –ü–û–ö–£–ü–ö–ê –¢–û–í–ê–†–û–í ====================
        let selectedProduct = null;
        
        function selectProduct(productId) {
            selectedProduct = products.find(p => p.id === productId);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
            viewHistory.push({
                id: selectedProduct.id,
                name: selectedProduct.name,
                price: selectedProduct.price,
                time: new Date().toLocaleTimeString()
            });
            localStorage.setItem('viewHistory', JSON.stringify(viewHistory));
            updateHistory();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–≤–∞—Ä–µ
            tg.showPopup({
                title: `üéØ ${selectedProduct.name}`,
                message: `${selectedProduct.desc}\n\n–¶–µ–Ω–∞: ${selectedProduct.price}\n\n–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã:`,
                buttons: [
                    { id: 'crypto', type: 'default', text: 'üíé –ö—Ä–∏–ø—Ç–æ (USDT/TON)' },
                    { id: 'rub', type: 'default', text: '‚ÇΩ –†—É–±–ª–∏ –ø–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º' },
                    { id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞' }
                ]
            }).then(result => {
                if (result === 'crypto') {
                    startCryptoPayment();
                } else if (result === 'rub') {
                    startRubPayment();
                }
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∫—É–ø–∫–∏
            tg.MainButton.setText(`–ö—É–ø–∏—Ç—å –∑–∞ ${selectedProduct.price}`);
            tg.MainButton.show();
        }
        
        function buyProduct() {
            if (!selectedProduct) {
                tg.showAlert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä!');
                return;
            }
            
            tg.showPopup({
                title: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏',
                message: `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∫—É–ø–∏—Ç—å "${selectedProduct.name}" –∑–∞ ${selectedProduct.price}?`,
                buttons: [
                    { id: 'confirm', type: 'destructive', text: '‚úÖ –î–∞, –∫—É–ø–∏—Ç—å' },
                    { id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞' }
                ]
            }).then(result => {
                if (result === 'confirm') {
                    startCryptoPayment();
                }
            });
        }
        
        // ==================== –û–ü–õ–ê–¢–ê ====================
        function startCryptoPayment() {
            tg.showAlert(`üíé –ö—Ä–∏–ø—Ç–æ-–æ–ø–ª–∞—Ç–∞\n\n–¢–æ–≤–∞—Ä: ${selectedProduct.name}\n–°—É–º–º–∞: ${selectedProduct.price}\n\n–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —Ç–æ–≤–∞—Ä –±—É–¥–µ—Ç –≤—ã–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–∏–Ω—É—Ç.`);
            
            // –ò–º–∏—Ç–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
            setTimeout(() => {
                deliverProduct('crypto');
            }, 2000);
        }
        
        function startRubPayment() {
            tg.showPopup({
                title: '‚ÇΩ –û–ø–ª–∞—Ç–∞ –ø–æ —Ä–µ–∫–≤–∏–∑–∏—Ç–∞–º',
                message: `–¢–æ–≤–∞—Ä: ${selectedProduct.name}\n–°—É–º–º–∞: ${selectedProduct.price}\n\n–†–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞:\n\nüí≥ –°–ë–ï–†–ë–ê–ù–ö: 2202 2001 2345 6789\nüë§ –ò–í–ê–ù –ò.–ò.\n\n–ü–æ—Å–ª–µ –ø–µ—Ä–µ–≤–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç —á–µ–∫–∞ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.`,
                buttons: [
                    { id: 'support', type: 'default', text: 'üìû –û—Ç–∫—Ä—ã—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É' },
                    { id: 'cancel', type: 'cancel', text: '–ü–æ–Ω—è—Ç–Ω–æ' }
                ]
            }).then(result => {
                if (result === 'support') {
                    openSupport();
                }
            });
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞ –∞–¥–º–∏–Ω—É
            sendOrderToAdminGroup('rub');
        }
        
        function deliverProduct(paymentMethod) {
            tg.showAlert(`‚úÖ –û–ø–ª–∞—Ç–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞!\n\n–¢–æ–≤–∞—Ä: ${selectedProduct.name}\n\nüì¶ –î–ê–ù–ù–´–ï –î–õ–Ø –ü–û–õ–£–ß–ï–ù–ò–Ø:\n\n${selectedProduct.data}\n\n‚ö†Ô∏è –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ!`);
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç–∞
            tg.sendData(JSON.stringify({
                action: 'product_delivered',
                productId: selectedProduct.id,
                userId: userId,
                userName: userName,
                paymentMethod: paymentMethod
            }));
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –ø–æ–∫—É–ø–∫–∏
            tg.MainButton.hide();
            selectedProduct = null;
        }
        
        function sendOrderToAdminGroup(paymentMethod) {
            tg.showAlert('üìã –ó–∞–∫–∞–∑ —Å–æ–∑–¥–∞–Ω! –û–∂–∏–¥–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.');
            
            // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å –∑–∞–ø—Ä–æ—Å –∫ –±—ç–∫–µ–Ω–¥—É
            console.log('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∞–º:', {
                product: selectedProduct,
                user: user,
                paymentMethod: paymentMethod,
                timestamp: new Date().toISOString()
            });
        }
        
        // ==================== –ê–î–ú–ò–ù-–§–£–ù–ö–¶–ò–ò ====================
        function showAddGameForm() {
            tg.showPopup({
                title: '‚ûï –î–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä—É/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ',
                message: '–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:',
                buttons: [
                    { id: 'game', type: 'default', text: 'üéÆ –ò–≥—Ä–∞' },
                    { id: 'app', type: 'default', text: 'üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ' },
                    { id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞' }
                ]
            }).then(result => {
                if (result === 'game' || result === 'app') {
                    tg.showAlert(`–§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è ${result === 'game' ? '–∏–≥—Ä—ã' : '–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è'}:\n\n‚Ä¢ –ò–∫–æ–Ω–∫–∞: üéÆ\n‚Ä¢ –ù–∞–∑–≤–∞–Ω–∏–µ: –ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è\n‚Ä¢ –¢–∏–ø: ${result === 'game' ? '–ò–≥—Ä–∞' : '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ'}\n\n–°–æ–∑–¥–∞—Ç—å?`);
                }
            });
        }
        
        function showAddProductForm() {
            tg.showPopup({
                title: 'üì¶ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä',
                message: '–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è —Ç–æ–≤–∞—Ä–∞:',
                buttons: [
                    ...games.map(game => ({ 
                        id: `game_${game.id}`, 
                        type: 'default', 
                        text: `${game.icon} ${game.name}` 
                    })),
                    ...apps.map(app => ({ 
                        id: `app_${app.id}`, 
                        type: 'default', 
                        text: `${app.icon} ${app.name}` 
                    })),
                    { id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞' }
                ]
            }).then(result => {
                if (result && result !== 'cancel') {
                    const categoryId = parseInt(result.split('_')[1]);
                    const category = [...games, ...apps].find(c => c.id === categoryId);
                    showProductCreationForm(category);
                }
            });
        }
        
        function showAddProductToCategory(category) {
            showProductCreationForm(category);
        }
        
        function showProductCreationForm(category) {
            tg.showPopup({
                title: `‚ûï –¢–æ–≤–∞—Ä –≤ ${category.name}`,
                message: `–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞:\n\n1. –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞\n2. –û–ø–∏—Å–∞–Ω–∏–µ\n3. –¶–µ–Ω–∞ ($ –∏–ª–∏ ‚ÇΩ)\n4. –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–¥–∞—á–∏ (–ª–æ–≥–∏–Ω:–ø–∞—Ä–æ–ª—å)\n\n–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—ã–¥–∞—á–∏:\n–õ–æ–≥–∏–Ω: player123\n–ü–∞—Ä–æ–ª—å: pass456\n–ö–ª—é—á: ABC-DEF-123`,
                buttons: [
                    { id: 'create', type: 'default', text: 'üìù –°–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä' },
                    { id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞' }
                ]
            }).then(result => {
                if (result === 'create') {
                    tg.showAlert(`‚úÖ –¢–æ–≤–∞—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ "${category.name}"!\n\n–¢–µ–ø–µ—Ä—å –æ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ø–æ–∫—É–ø–∫–∏.`);
                    
                    // –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É
                    const newProduct = {
                        id: Date.now(),
                        name: '–ù–æ–≤—ã–π —Ç–æ–≤–∞—Ä',
                        desc: '–û–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞',
                        price: '$19.99',
                        icon: 'üì¶',
                        gameId: category.id,
                        data: '–õ–æ–≥–∏–Ω: test\n–ü–∞—Ä–æ–ª—å: test123'
                    };
                    
                    products.push(newProduct);
                    loadProducts();
                }
            });
        }
        
        function editCategory(category) {
            tg.showPopup({
                title: `‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ${category.name}`,
                message: `–ò–∑–º–µ–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:`,
                buttons: [
                    { id: 'name', type: 'default', text: 'üìù –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ' },
                    { id: 'icon', type: 'default', text: 'üé® –ò–∑–º–µ–Ω–∏—Ç—å –∏–∫–æ–Ω–∫—É' },
                    { id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞' }
                ]
            });
        }
        
        function viewCategoryProducts(category) {
            const categoryProducts = products.filter(p => p.gameId === category.id);
            
            if (categoryProducts.length === 0) {
                tg.showAlert(`–í –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "${category.name}" –ø–æ–∫–∞ –Ω–µ—Ç —Ç–æ–≤–∞—Ä–æ–≤.`);
                return;
            }
            
            let message = `–¢–æ–≤–∞—Ä—ã –≤ "${category.name}":\n\n`;
            categoryProducts.forEach((p, i) => {
                message += `${i+1}. ${p.name} - ${p.price}\n`;
            });
            
            tg.showAlert(message);
        }
        
        function deleteCategory(category) {
            tg.showPopup({
                title: 'üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é',
                message: `–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å "${category.name}"?\n\n–í—Å–µ —Ç–æ–≤–∞—Ä—ã –≤ —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–∞–∫–∂–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã!`,
                buttons: [
                    { id: 'delete', type: 'destructive', text: '–î–∞, —É–¥–∞–ª–∏—Ç—å' },
                    { id: 'cancel', type: 'cancel', text: '–û—Ç–º–µ–Ω–∞' }
                ]
            }).then(result => {
                if (result === 'delete') {
                    tg.showAlert(`–ö–∞—Ç–µ–≥–æ—Ä–∏—è "${category.name}" —É–¥–∞–ª–µ–Ω–∞.`);
                }
            });
        }
        
        function showOrders() {
            tg.showAlert(`üìä –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏\n\n–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤:\n\n‚Ä¢ –û–∂–∏–¥–∞—é—Ç –æ–ø–ª–∞—Ç—ã: 3\n‚Ä¢ –í –æ–±—Ä–∞–±–æ—Ç–∫–µ: 2\n‚Ä¢ –í—ã–ø–æ–ª–Ω–µ–Ω—ã: 15\n\n–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Telegram-–≥—Ä—É–ø–ø—É.`);
        }
        
        // ==================== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function deleteHistory() {
            viewHistory = [];
            localStorage.removeItem('viewHistory');
            updateHistory();
            tg.showAlert('–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –æ—á–∏—â–µ–Ω–∞');
        }
        
        function showAllGames() {
            tg.showAlert('üéÆ –í—Å–µ –∏–≥—Ä—ã –º–∞–≥–∞–∑–∏–Ω–∞\n\n–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ: –ø–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –∏–≥—Ä');
        }
        
        function showAllApps() {
            tg.showAlert('üì± –í—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è\n\n–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ: –ø–æ–ª–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ —É—Å–ª—É–≥ Telegram');
        }
        
        function openSupport() {
            tg.showPopup({
                title: 'üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞',
                message: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏:',
                buttons: [
                    { id: 'chat', type: 'default', text: 'üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç' },
                    { id: 'faq', type: 'default', text: '‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã' },
                    { id: 'close', type: 'cancel', text: '–ó–∞–∫—Ä—ã—Ç—å' }
                ]
            }).then(result => {
                if (result === 'chat') {
                    tg.openTelegramLink('https://t.me/–≤–∞—à–∞_–ø–æ–¥–¥–µ—Ä–∂–∫–∞');
                } else if (result === 'faq') {
                    tg.showAlert('‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã\n\nQ: –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã?\nA: –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —á–∞—Ç.\n\nQ: –°–∫–æ–ª—å–∫–æ –∂–¥–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø–ª–∞—Ç—ã?\nA: –î–æ 15 –º–∏–Ω—É—Ç –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è.');
                }
            });
        }
        
        function openBonuses() {
            tg.showAlert('üéÅ –†–∞–∑–¥–µ–ª –±–æ–Ω—É—Å–æ–≤\n\n‚Ä¢ –ü—Ä–æ–º–æ–∫–æ–¥ WELCOME10 - 10% —Å–∫–∏–¥–∫–∞\n‚Ä¢ –ö–∞–∂–¥—ã–µ 5 –ø–æ–∫—É–ø–æ–∫ - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–æ–≤–∞—Ä\n‚Ä¢ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞: 5% —Å –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏ –¥—Ä—É–≥–∞');
        }
        
        function openProfile() {
            tg.showPopup({
                title: `üë§ –ü—Ä–æ—Ñ–∏–ª—å ${userName}`,
                message: `ID: ${userId}\n\n–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:\n‚Ä¢ –ó–∞–∫–∞–∑–æ–≤: 0\n‚Ä¢ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: $0\n‚Ä¢ –ë–æ–Ω—É—Å–æ–≤: 100\n\n${isAdmin ? 'üëë –°—Ç–∞—Ç—É—Å: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä' : 'üë§ –°—Ç–∞—Ç—É—Å: –ü–æ–∫—É–ø–∞—Ç–µ–ª—å'}`,
                buttons: [
                    { id: 'orders', type: 'default', text: 'üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã' },
                    { id: 'bonuses', type: 'default', text: 'üéÅ –ú–æ–∏ –±–æ–Ω—É—Å—ã' },
                    { id: 'close', type: 'cancel', text: '–ó–∞–∫—Ä—ã—Ç—å' }
                ]
            });
        }
        
        // ==================== –ü–û–ò–°–ö ====================
        const searchInput = document.querySelector('.search-input');
        searchInput.addEventListener('input', function(e) {
            const query = e.target.value.toLowerCase();
            if (query.length > 1) {
                console.log('–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤:', query);
            }
        });
        
        // ==================== –û–¢–ü–†–ê–í–ö–ê –î–ê–ù–ù–´–• –ë–û–¢–£ ====================
        function sendToBot(action, data) {
            const payload = {
                action: action,
                userId: userId,
                data: data,
                timestamp: new Date().toISOString()
            };
            
            tg.sendData(JSON.stringify(payload));
            console.log('–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –±–æ—Ç—É:', payload);
        }
    </script>
</body>
</html>
